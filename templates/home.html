{% extends "base.html" %}
{% block title %}{{ locale.get('home_title', '보건소 키오스크') }}{% endblock %}

{% block content %}
<!-- ★ 첫 화면 로드 시 음성 자동 재생 -->
<audio id="welcome-audio" src="{{ audio_url }}" autoplay></audio>

<div class="home-container">
    <!-- 로고 + 제목 -->
    <div class="logo-and-title">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="보건소 로고">
        <h1>{{ locale.get('home_title', '보건소에 오신 것을 환영합니다') }}</h1>
    </div>

    <!-- 버튼 그룹 -->
    <div class="button-group">
        <button class="primary-btn" onclick="location.href='{{ url_for('reception.reception') }}'">
            {{ locale.get('btn_checkin', '① 접수(순번표)') }}
        </button>
        <button class="primary-btn" onclick="location.href='{{ url_for('payment.payment') }}'">
            {{ locale.get('btn_payment', '② 수납') }}
        </button>
        <button class="primary-btn" onclick="location.href='{{ url_for('certificate.certificate') }}'">
            {{ locale.get('btn_certificate', '③ 증명서 발급') }}
        </button>
        <button class="primary-btn" onclick="location.href='{{ url_for('chatbot.chatbot_interface') }}'">
            AI 챗봇 상담
        </button>
    </div>
</div>

<!-- (선택) 브라우저 자동재생 제한 우회용: 실패 시 첫 클릭에 재생 -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const audio = document.getElementById('welcome-audio');
        if (audio && audio.paused) {
            const resumePlay = () => {
                audio.play().catch(() => {/* ignore */});
                document.removeEventListener('click', resumePlay);
            };
            document.addEventListener('click', resumePlay, { once: true });
        }
    });
</script>
{% endblock %}
